# Итоговое задания по курсу разработчик Go с нуля

Проект написан для проверки усвоения материала всего курса в целом.

# Выполненные задачи со звездочкой
Были выполнены все задачи со звёздочкой, а именно:
- реализована возможность определять извне порт при запуске сервера через переменную окружения
- реализована возможность определять путь к файлу базы данных через переменную окружения
- реализованы правила повторения для недель и месяцев
- реализован поиск задач по кропке "Найти"
- к веб-сервису подключен механизм аутентификации
- создан dockerfile для автоматической сборки образа и запуска веб-сервиса

# Тестирование задач

Для запуска кода локально в VSCode можно использовать приложенный в исходниках launch.json.

Следует учесть, что при заданной переменной окружения TODO_PASSWORD тест TestApp из файла app_1_test.go будет падать с ошибкой, т.к. он не учитывает, что index.html не будет показан при его запросе до тех пор пока не пройдет авторизация пользователя.

Для запуска полного списка тестов, включающего все задачи со звездочкой, в файле ./tests/settings.go должны быть указаны следующие параметры:
```go
var Port = 7540
var DBFile = "../db/scheduler.db"
var FullNextDate = true
var Search = true
var Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwd2QiOiI1OTk0NDcxYWJiMDExMTJhZmNjMTgxNTlmNmNjNzRiNGY1MTFiOTk4MDZkYTU5YjNjYWY1YTljMTczY2FjZmM1In0.G2IyLSf_6d0BTMd55WSovmTagaSS9v5DHBmcAr2Hcf0"
```

# Работа с docker образом

## Сборка проекта

Стандартно `docker build -t go_final_project .`
Через --build-arg можно указать `APP_DIR` куда будет скопировано приложение

Из минусов
- сборка проекта/запуск не разнесены по stage
- запуск из-под root

## Запуск проекта

Пример запуска с подключеннием базы данных (при условии сборки по умолчанию)
`docker run -d -p 7540:7540 -v ./db/scheduler.db:/app/db/scheduler.db go_final_project:latest`

Также можно задать все необходимые переменные окружения
- TODO_PORT
- TODO_DBFILE (требует корректировки запуска в части монтирования)
- TODO_PASSWORD
- TODO_WEBDIR
